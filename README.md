# üìò Price Service API [Monolithic way] 

> *–°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ —Ü—ñ–Ω –∞–∫—Ü—ñ–π (Price Service) ‚Äì REST API –Ω–∞ Spring Boot –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è, –∑–∞–ø–∏—Ç—É —Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É
—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —á–∞—Å–æ–≤–∏—Ö —Ä—è–¥—ñ–≤ —Ü—ñ–Ω.*

---

## üë§ –ê–≤—Ç–æ—Ä

* **–ü–Ü–ë**: –ö–æ–º–∞—Ä–æ–≤ –ê—Ä—Ç–µ–º
* **–ì—Ä—É–ø–∞**: –§–ï–°-42
* **–ö–µ—Ä—ñ–≤–Ω–∏–∫**: –¥–æ—Ü. –ö–£–ù–¨–û –Ü.–ú
* **–î–∞—Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è**: 07.06.2025

---

## üìå –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

* **–¢–∏–ø –ø—Ä–æ—î–∫—Ç—É**: –ú—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å (REST API –Ω–∞ Spring Boot)
* **–ú–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è**: Java 17 (Spring Boot 3.4.5)
* **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**: MongoDB 7.0
* **–°–∏—Å—Ç–µ–º–∞ –∑–±—ñ—Ä–∫–∏**: Maven
* **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è**: Docker + Docker Compose
* **–§—Ä–µ–π–º–≤–æ—Ä–∫–∏ / –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏**:

    * Spring Boot (Web, Data MongoDB, Actuator)
    * Lombok, MapStruct
    * Ta4j –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤
    * SLF4J (–ª–æ–≥—É–≤–∞–Ω–Ω—è)

---

## üß† –û–ø–∏—Å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

* üîå **Status Endpoint**

    * `GET /api/v1/status/ping`
    * –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ —Å–µ—Ä–≤—ñ—Å –∑–∞–ø—É—â–µ–Ω–æ (–ø–æ–≤–µ—Ä—Ç–∞—î HTTP 200 –∑ –ø—Ä–æ—Å—Ç–∏–º –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º).

* üìä **CRUD –¥–ª—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ (Price)**

    * `POST /api/v1/prices` ‚Äì –¥–æ–¥–∞–≤–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ —á–∏ –º–∞—Å–∏–≤—É –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ (—Å—é–¥–∏ –ø–æ—Ç—Ä–∞–ø–ª—è—é—Ç—å –¥–∞—Ç–∞, —Ç–∏–∫–µ—Ä, —Ü—ñ–Ω–∞).
    * `GET /api/v1/prices?ticker={symbol}&from={date}&to={date}` ‚Äì –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ –ø–µ–≤–Ω–æ–≥–æ —Ç–∏–∫–µ—Ä–∞ –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ –¥–∞—Ç.
    * `DELETE /api/v1/prices/{id}` ‚Äì –≤–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ –∑–∞ —ó—ó `ObjectId`.

* üìà **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ (Technical Indicators)**

    * `GET /api/v1/analytics/sma?ticker={symbol}&period={n}` ‚Äì —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ Simple Moving Average (SMA) –¥–ª—è —Ç–∏–∫–µ—Ä–∞ –∑–∞
      –æ—Å—Ç–∞–Ω–Ω—ñ `n` –ø–µ—Ä—ñ–æ–¥—ñ–≤.
    * `GET /api/v1/analytics/rsi?ticker={symbol}&period={n}` ‚Äì —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ Relative Strength Index (RSI) –∑–∞ –≤–∫–∞–∑–∞–Ω–∏–º
      –ø–µ—Ä—ñ–æ–¥–æ–º.
    * –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è —è–∫ JSON –∑ –º–∞—Å–∏–≤–æ–º –¥–∞—Ç —Ç–∞ –∑–Ω–∞—á–µ–Ω—å —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞.

* ‚öôÔ∏è **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö**

    * –ü—Ä–∏ —Å—Ç–∞—Ä—Ç—ñ —Å–µ—Ä–≤—ñ—Å—É –∑—á–∏—Ç—É—é—Ç—å—Å—è –ø–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ –∑ –ø–∞–ø–∫–∏ `src/main/resources/data` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, CSV –∑ –∫–æ—Ç–∏—Ä–æ–≤–∫–∞–º–∏) —ñ
      –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ MongoDB.

* üìë **–ü–æ–±—É–¥–æ–≤–∞ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤**

    * –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø–∞—Ä—Å–∏–Ω–≥—É —Ñ—ñ–ª—å—Ç—Ä—ñ–≤ —ñ–∑ —Ä—è–¥–∫–∞ –∑–∞–ø–∏—Ç—É (–æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ `>`, `<`, `>=`, `<=`, `==`) –¥–ª—è –±—ñ–ª—å—à –≥–Ω—É—á–∫–æ–≥–æ –ø–æ—à—É–∫—É
      –¥–∞–Ω–∏—Ö.

---

## üß± –û–ø–∏—Å –æ—Å–Ω–æ–≤–Ω–∏—Ö –∫–ª–∞—Å—ñ–≤ / —Ñ–∞–π–ª—ñ–≤

| –ö–ª–∞—Å / –§–∞–π–ª                                                   | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                                                                                               |
|---------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------|
| `PriceServiceApplication.java`                                | –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É Spring Boot, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤.                   |
| `StatusController.java`                                       | REST-–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –¥–ª—è `/api/v1/status` (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–µ—Ä–≤—ñ—Å—É).                                            |
| `PricesController.java`                                       | REST-–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü—ñ–π –∑ –∫–æ—Ç–∏—Ä–æ–≤–∫–∞–º–∏ (POST, GET, DELETE).                                       |
| `AnalyticController.java`                                     | REST-–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –¥–ª—è API —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ (SMA, RSI).                                       |
| `PriceService.java` / `PriceServiceImpl.java`                 | –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞: –æ–ø–µ—Ä–∞—Ü—ñ—ó –∑ –∫–æ—Ç–∏—Ä–æ–≤–∫–∞–º–∏ (–∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è, –ø–æ—à—É–∫, –≤–∏–¥–∞–ª–µ–Ω–Ω—è).                                     |
| `Ta4jHeavyService.java`                                       | –°–µ—Ä–≤—ñ—Å –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É —Ç–µ—Ö–Ω—ñ—á–Ω–∏—Ö —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Ta4j.                                 |
| `Price.java`                                                  | –ú–æ–¥–µ–ª—å (Entity) –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ—Ç–∏—Ä–æ–≤–æ–∫ —É MongoDB (`@Document` –∑ –ø–æ–ª—è–º–∏ `ticker`, `priceDate`, `value`). |
| `PriceDto.java`                                               | DTO –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –¥–∞–Ω–∏—Ö –∫–æ—Ç–∏—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ REST (–±–µ–∑ MongoDB-–∞–Ω–æ—Ç–∞—Ü—ñ–π).                                       |
| `PriceRepository.java`                                        | Spring Data MongoDB —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –¥–ª—è `Price` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ CRUD-–º–µ—Ç–æ–¥–∏).                                    |
| `SMAResult.java` / `IndicatorResult.java`                     | –ú–æ–¥–µ–ª—ñ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤ (–¥–∞—Ç–∞ + –∑–Ω–∞—á–µ–Ω–Ω—è).                                      |
| `DataBaseLoader.java`                                         | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç, —â–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –ø–æ—á–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ –∑ —Ä–µ—Å—É—Ä—Å—ñ–≤ —É MongoDB (—è–∫—â–æ —î).                        |
| `QueryBuilder.java`, `FilterParser.java`, `FilterClause.java` | –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö MongoDB-–∑–∞–ø–∏—Ç—ñ–≤ –∑–∞ —Ñ—ñ–ª—å—Ç—Ä–∞–º–∏, –∑–∞–¥–∞–Ω–∏–º–∏ –≤ URL.                             |
| `EntityDtoMapper.java` / `PriceMapper.java`                   | –ú–∞–ø—ñ–Ω–≥ –º—ñ–∂ Entity (Price) —ñ DTO (PriceDto) —á–µ—Ä–µ–∑ MapStruct.                                               |
| `TickerPriceProjection.java`                                  | –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å-–ø—Ä–æ–∂–µ–∫—Ü—ñ—è –¥–ª—è –≤–∏–±—ñ—Ä–∫–æ–≤–∏—Ö –ø–æ–ª—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ç—ñ–ª—å–∫–∏ `ticker` —Ç–∞ `closePrice`).                    |
| `Operator.java`                                               | –ü–µ—Ä–µ–ª—ñ—á–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è (`>`, `<`, `==`, —Ç–æ—â–æ) –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó.                                  |
| `FilterParser.java`                                           | –ö–ª–∞—Å –¥–ª—è —Ä–æ–∑–±–æ—Ä—É —Ä—è–¥–∫–∞ —Ñ—ñ–ª—å—Ç—Ä—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `price>100`) —É –æ–∫—Ä–µ–º—ñ —É–º–æ–≤–∏.                                   |
| `BaseController.java`                                         | –ë–∞–∑–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä (—Å–ø—ñ–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞) –¥–ª—è —ñ–Ω—à–∏—Ö REST-–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –æ–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤).              |

---

## ‚ñ∂Ô∏è –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç "–∑ –Ω—É–ª—è"

> –î–∞–Ω—ñ –≤–∞–Ω—Ç–∞–∂—É—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É

### 1. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

* Java 17 (JDK)
* Maven 3.8+
* Docker (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—ó)
* Docker Compose 1.29+
* MongoDB 7.0 (–∑–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –ª–æ–∫–∞–ª—å–Ω–æ, –∞–ª–µ Docker Compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–Ω—ñ–º–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

### 2. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone https://github.com/your-user/analytics-microservices.git
cd analytics-microservices
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `application.yaml`

* –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (–±–µ–∑ –ø—Ä–æ—Ñ—ñ–ª—é) —Å–µ—Ä–≤—ñ—Å —Å–ª—É—Ö–∞—î –Ω–∞ –ø–æ—Ä—Ç—É **9002** —ñ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ
  `mongodb://localhost:27017/price-db`.
* –î–ª—è –∑–∞–ø—É—Å–∫—É –≤ Docker –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–æ—Ñ—ñ–ª—å `docker`, —è–∫–∏–π —Å–ª—É—Ö–∞—î –Ω–∞ –ø–æ—Ä—Ç—ñ **8080** —ñ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
  Mongo –∑–∞ —ñ–º–µ–Ω–µ–º `mongo`.
* –Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —É –≤–∞—Å MongoDB –ø—Ä–∞—Ü—é—î –Ω–∞ `localhost:27017`.

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

–Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ MongoDB URI —á–∏ –ø–æ—Ä—Ç —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è, —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —É –∫–æ—Ä–µ–Ω—ñ –∑ —Ç–∞–∫–∏–º –≤–º—ñ—Å—Ç–æ–º:

```
SPRING_PROFILES_ACTIVE=docker
SPRING_DATA_MONGODB_HOST=mongo
SPRING_DATA_MONGODB_PORT=27017
```

### 5. –ü–æ–±—É–¥–æ–≤–∞ —Ç–∞ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
# –ó –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –ø–∞–ø–∫–∏ –ø—Ä–æ—î–∫—Ç—É (analytics-microservices):
docker-compose up --build
```

* **Mongo** (–ø–æ—Ä—Ç 27017) —ñ **mongo-express** (–ø–æ—Ä—Ç 8081) –ø—ñ–¥–Ω—ñ–º—É—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.
* **api-service** (Price Service) —Å—Ç–∞—Ä—Ç—É—î –Ω–∞ –ø–æ—Ä—Ç—É **8080**.
* –©–æ–± –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É, —É –±—Ä–∞—É–∑–µ—Ä—ñ –∞–±–æ —á–µ—Ä–µ–∑ `curl` –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

  ```
  curl http://localhost:8080/api/v1/status/ping
  ```

  –ü–æ–≤–µ—Ä–Ω–µ—Ç—å—Å—è HTTP 200 –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º, —â–æ —Å–µ—Ä–≤—ñ—Å –∑–∞–ø—É—â–µ–Ω–æ.

### 6. –ó–∞–ø—É—Å–∫ –±–µ–∑ Docker (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ MongoDB –∑–∞–ø—É—â–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ localhost:27017
cd api-service
mvn clean package -DskipTests
java -jar target/api-service-1.0-SNAPSHOT.jar
```

* –°–µ—Ä–≤—ñ—Å –ø–æ—á–Ω–µ —Å–ª—É—Ö–∞—Ç–∏ –Ω–∞ –ø–æ—Ä—Ç—ñ **9002** (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º).
* –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:9002/api/v1/status/ping`.

---

## üîå API –ø—Ä–∏–∫–ª–∞–¥–∏

### üîê –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É

**GET /api/v1/status**

```bash
curl -i http://localhost:8080/api/v1/status/ping
```

**Response:**

```json
pong
```

---

### üìã –¶—ñ–Ω–∏ (Prices)

* **POST api/public/v1/prices/load-data** ‚Äì –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ü—ñ–Ω

  ```json
    [
        {
            "ticker": "AAPL",
            "date": "2010-01-01",
            "open": 294.06,
            "high": 340.68,
            "low": 268.59,
            "close": 329.72,
            "volume": 6459.53
        }
    ]
  ```

  **Response:** HTTP 201 CREATED

* **GET api/public/v1/prices?date=gte:2015-03-30&sort=date,asc&page=0&size=2&ticker=eq:AAPL** ‚Äì –û—Ç—Ä–∏–º–∞—Ç–∏ —Ü—ñ–Ω AAPL —É
  –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ
  **Response:**

  ```json
  {
    "content": [
        {
            "ticker": "AAPL",
            "date": "2024-01-01",
            "open": 300.16,
            "high": 344.56,
            "low": 273.32,
            "close": 311.81,
            "volume": 20138.96
        },
        {
            "ticker": "AAPL",
            "date": "2024-01-02",
            "open": 384.93,
            "high": 397.28,
            "low": 367.35,
            "close": 378.16,
            "volume": 87904.84
        }
    ],
    "pageable": {
        "pageNumber": 0,
        "pageSize": 2,
        "sort": {
            "empty": false,
            "sorted": true,
            "unsorted": false
        },
        "offset": 0,
        "paged": true,
        "unpaged": false
    },
    "last": false,
    "totalPages": 262,
    "totalElements": 523,
    "size": 2,
    "number": 0,
    "sort": {
        "empty": false,
        "sorted": true,
        "unsorted": false
    },
    "numberOfElements": 2,
    "first": true,
    "empty": false

}

* **GET /api/public/v1/prices?date=gte:2015-03-30\&sort=ticker,desc\&page=0\&size=2**
  –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É –∑ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—î—é –∑–∞ –¥–∞—Ç–æ—é, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è–º –∑–∞ —Ç–∏–∫–µ—Ä–æ–º —É –ø–æ—Ä—è–¥–∫—É —Å–ø–∞–¥–∞–Ω–Ω—è —Ç–∞ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é (–ø–µ—Ä—à–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞, 2
  –∑–∞–ø–∏—Å–∏ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É):

  ```bash
  curl -i "http://localhost:8080/api/public/v1/prices?date=gte:2015-03-30&sort=ticker,desc&page=0&size=2"
  ```

**Response (200 OK):**

  ```json
  {
  "content": [
    {
      "ticker": "XOM",
      "date": "2025-12-31",
      "open": 246.3,
      "high": 294.38,
      "low": 205.78,
      "close": 216.83,
      "volume": 92042.38
    },
    {
      "ticker": "XOM",
      "date": "2025-12-30",
      "open": 496.86,
      "high": 536.79,
      "low": 479.5,
      "close": 481.35,
      "volume": 19169.34
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 2,
    "sort": {
      "empty": false,
      "sorted": true,
      "unsorted": false
    },
    "offset": 0,
    "paged": true,
    "unpaged": false
  },
  "last": false,
  "totalPages": 26150,
  "totalElements": 52300,
  "size": 2,
  "number": 0,
  "sort": {
    "empty": false,
    "sorted": true,
    "unsorted": false
  },
  "numberOfElements": 2,
  "first": true,
  "empty": false
}
  ```

* **DELETE /api/v1/prices/{id}** ‚Äì –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ç–∏—Ä–æ–≤–∫—É –∑–∞ `id`
  **Response:** HTTP 204 NO CONTENT

---

### üìà –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ (Indicators)

* **GET api/public/v1/prices/indicators/historical/AAPL?window=300**
  –ü–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤ –æ–±‚Äô—î–∫—Ç—ñ–≤ `{ "date": "...", "sma": ... }` –¥–ª—è SMA —ñ–∑ –ø–µ—Ä—ñ–æ–¥–æ–º 5.

  **Response (JSON):**

  ```json
  [
    {
        "ticker": "AAPL",
        "date": "2025-02-21",
        "sma": 271.42
    },
    {
        "ticker": "AAPL",
        "date": "2025-02-24",
        "sma": 271.64
    }
  ]
  ```

* **GET api/public/v1/prices/indicators?tickers=AAPL&start=2000-01-01&end=2025-01-01**
  –û–±—á–∏—Å–ª—é—î –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è AAPL.

  **Response (JSON):**

  ```json
  [
    {
        "ticker": "AAPL",
        "atr": 187.71,
        "rsi": 45.607227335893825,
        "bbUpper": 335.0,
        "bbLower": -152.0,
        "maxDrawdown": -0.9193563582235789,
        "recoveryTimeBars": 0
    }
  ]
  ```

## üß™ –ü—Ä–æ–±–ª–µ–º–∏ —ñ —Ä—ñ—à–µ–Ω–Ω—è

| –ü—Ä–æ–±–ª–µ–º–∞                           | –†—ñ—à–µ–Ω–Ω—è                                                                                             |
|------------------------------------|-----------------------------------------------------------------------------------------------------|
| 500 Internal Server Error –ø—Ä–∏ POST | –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –ø–æ–ª–µ `priceDate` –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Ñ–æ—Ä–º–∞—Ç—É ISO 8601 (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `2025-06-06T00:00:00Z`).    |
| –ù–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ MongoDB        | –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –∑–º—ñ–Ω–Ω–∞ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ `SPRING_DATA_MONGODB_HOST=mongo` (–∞–±–æ localhost, —è–∫—â–æ –±–µ–∑ Docker). |
| –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö       | –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å –≤–∏—Ä–∞–∑—É `filter` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `price>100`) —ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `FilterParser`.     |

---

## üßæ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –¥–∂–µ—Ä–µ–ª–∞ / –ª—ñ—Ç–µ—Ä–∞—Ç—É—Ä–∞

* Spring Boot –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è ([https://spring.io/projects/spring-boot](https://spring.io/projects/spring-boot))
* MongoDB –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è ([https://docs.mongodb.com/](https://docs.mongodb.com/))
* Ta4j (Technical Analysis for Java) ([https://ta4j.github.io/](https://ta4j.github.io/))
* MapStruct ([https://mapstruct.org/](https://mapstruct.org/))
* Lombok ([https://projectlombok.org/](https://projectlombok.org/))
